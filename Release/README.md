<div align="center">

<br/>

# ‚öîÔ∏è Offline Companions

### Hire NPC companions and browse an expanded trader shop ‚Äî all without leaving the tenth world.

<br/>

[![Version](https://img.shields.io/badge/Version-1.0.0-c9a44a?style=for-the-badge&labelColor=0d1117)](https://github.com/JoeCorrell/OfflineCompanions/releases)
[![BepInEx](https://img.shields.io/badge/BepInEx-5.4.2200+-e06c20?style=for-the-badge&labelColor=0d1117)](#-requirements)
[![Valheim](https://img.shields.io/badge/Valheim-0.219+-4ade80?style=for-the-badge&labelColor=0d1117)](#-requirements)
[![License](https://img.shields.io/badge/License-MIT-7c3aed?style=for-the-badge&labelColor=0d1117)](#)

<br/>

<a href="https://ko-fi.com/profmags">
<img src="https://storage.ko-fi.com/cdn/kofi3.png?v=3" alt="Support me on Ko-fi" width="280"/>
</a>

<br/><br/>

---

<br/>

![Overview](https://img.shields.io/badge/%F0%9F%93%96_OVERVIEW-2b3a4a?style=for-the-badge&labelColor=2b3a4a)

<table><tr><td width="900">
<br/>

Offline Companions adds persistent NPC allies and an expanded trader inventory to Haldor's shop. Companions cost **2,000 coins** and come with their own inventory, equipment, stamina, food system, and AI ‚Äî they aren't pets or tames, they're **teammates**. The expanded shop introduces new items and categories to Haldor's stock, giving you more reasons to visit the trader at every stage of progression.

Customize companion appearance, gear them up, set their combat stance, and command them with a point-and-click hotkey system. They'll fight beside you, chop wood while you build, haul your cart to the next biome, and repair their own gear at your workbench.

<br/>
</td></tr></table>

<br/>

---

<br/>

![Getting Started](https://img.shields.io/badge/%F0%9F%9B%92_GETTING_STARTED-3a2b4a?style=for-the-badge&labelColor=3a2b4a)

<table><tr><td width="900">
<br/>

### ü™ô Purchase
Visit Haldor and open the **Companions** tab to recruit a new companion. Each costs **2,000 coins** from your bank balance. Customize their name, gender, hair, beard, and colors before confirming.

### üéí Inventory
Companions carry their own **5√ó6 inventory** (300 weight capacity). Equip them with weapons, shields, and armor ‚Äî they'll auto-equip the best available gear. Feed them food for bonus health and stamina, just like a player.

### üéØ Commands
Point your crosshair and press the command hotkey to issue contextual orders. The companion figures out what to do based on what you're looking at ‚Äî no menus needed.

<br/>
</td></tr></table>

<br/>

---

<br/>

![Combat AI](https://img.shields.io/badge/%E2%9A%94%EF%B8%8F_COMBAT_AI-c9444a?style=for-the-badge&labelColor=0d1117)

<table><tr><td width="900">
<br/>

Companions engage enemies automatically with melee or ranged weapons. They dodge incoming attacks, parry with shields, deliver power attacks on staggered foes, and retreat to recover when low on health or stamina.

**Four combat stances** let you control their aggression:

| Stance | Behavior |
|:---|:---|
| üü¢ **Balanced** | Default ‚Äî fights when threatened |
| üî¥ **Aggressive** | Engages at longer range, retreats only when critical |
| üîµ **Defensive** | Blocks more, retreats earlier, stays closer |
| ‚ö™ **Passive** | Never initiates combat, follows only |

<br/>
</td></tr></table>

<br/>

![Resource Gathering](https://img.shields.io/badge/%F0%9F%AA%93_RESOURCE_GATHERING-4a9c5e?style=for-the-badge&labelColor=0d1117)

<table><tr><td width="900">
<br/>

Set a companion to **Gather Wood**, **Gather Stone**, or **Gather Ore** and they'll autonomously find, walk to, and harvest nearby resources. They prioritize fallen logs and stumps over standing trees, collect all dropped items after each hit, and stop when overweight.

> **üí° Tip:** Point at a specific resource to direct them straight to it.

<br/>
</td></tr></table>

<br/>

![Stay Home](https://img.shields.io/badge/%F0%9F%8F%A0_STAY_HOME_%26_AUTO--DEPOSIT-4a7cc9?style=for-the-badge&labelColor=0d1117)

<table><tr><td width="900">
<br/>

Toggle **Stay Home** to anchor a companion near a set position. They'll patrol within **50m of home** instead of following you. Combine with a gather mode and they'll harvest resources near home, then automatically find the nearest chest and deposit their haul when full ‚Äî no player interaction needed.

> **üí° Perfect for** base-side wood farms and mining outposts.

<br/>
</td></tr></table>

<br/>

![Directed Commands](https://img.shields.io/badge/%F0%9F%91%86_DIRECTED_COMMANDS-d4a017?style=for-the-badge&labelColor=0d1117)

<table><tr><td width="900">
<br/>

Point your crosshair at objects and press the command hotkey:

| Target | Action |
|:---|:---|
| üå≤ **Resource** *(tree, rock, ore)* | Enter gather mode for that resource type |
| üî® **Crafting Station** *(forge, workbench)* | Walk to station and repair all compatible gear |
| üõí **Cart** | Attach to cart and haul it *(press again to detach)* |
| ‚õµ **Ship** | Board the ship |
| üõèÔ∏è **Bed** | Go to sleep |
| üì¶ **Chest** | Walk to chest and deposit non-equipped items |
| üü´ **Ground** | Walk to that position and wait |
| ‚èé **Hold Hotkey** | Cancel all commands, return to player |

<br/>
</td></tr></table>

<br/>

![Auto-Repair](https://img.shields.io/badge/%F0%9F%94%A7_AUTO--REPAIR-e06c20?style=for-the-badge&labelColor=0d1117)

<table><tr><td width="900">
<br/>

Companions periodically scan their equipped gear. When durability drops below threshold, they'll walk to the nearest compatible crafting station and repair everything they can. Point at a specific station to prioritize it.

<br/>
</td></tr></table>

<br/>

![Door Handling](https://img.shields.io/badge/%F0%9F%9A%AA_DOOR_HANDLING-7c6c4f?style=for-the-badge&labelColor=0d1117)

<table><tr><td width="900">
<br/>

Companions detect when they're stuck behind a closed door and automatically open it, walk through, and close it behind them. They also proactively find doors when circling a building trying to reach the player.

<br/>
</td></tr></table>

<br/>

![Food System](https://img.shields.io/badge/%F0%9F%8D%96_FOOD_SYSTEM-d4577a?style=for-the-badge&labelColor=0d1117)

<table><tr><td width="900">
<br/>

Companions have **three food slots**, just like players. Feed them via the inventory panel ‚Äî food provides bonus health, stamina, and passive regeneration. They'll speak up when hungry.

<br/>
</td></tr></table>

<br/>

![Equipment](https://img.shields.io/badge/%F0%9F%9B%A1%EF%B8%8F_EQUIPMENT_%26_DURABILITY-7c3aed?style=for-the-badge&labelColor=0d1117)

<table><tr><td width="900">
<br/>

Companions auto-equip the best weapon, shield, and armor from their inventory. Weapons lose durability on use. Armor reduces incoming damage. Overhead durability bars show equipment condition at a glance.

<br/>
</td></tr></table>

<br/>

![Interaction Panel](https://img.shields.io/badge/%F0%9F%96%A5%EF%B8%8F_INTERACTION_PANEL-2896a5?style=for-the-badge&labelColor=0d1117)

<table><tr><td width="900">
<br/>

Press **E** on a companion to open the tabbed interaction panel:

| Tab | Description |
|:---|:---|
| üé® **Customize** | Rename, change appearance ‚Äî gender, hair, beard, skin & hair color |
| üéí **Inventory** | Drag items in/out, feed food, view durability bars |
| ‚ö° **Actions** | Set action mode, combat stance, toggle Stay Home, set home position |

> Full mouse and controller support with tab navigation via bumpers.

<br/>
</td></tr></table>

<br/>

![Trader Shop](https://img.shields.io/badge/%F0%9F%8F%AA_EXPANDED_TRADER_SHOP-b8860b?style=for-the-badge&labelColor=0d1117)

<table><tr><td width="900">
<br/>

Haldor's inventory has been overhauled with new items and categories. Browse an expanded stock that grows with your progression ‚Äî giving you more reasons to visit the trader throughout every stage of the game. The Companions tab integrates seamlessly into this redesigned trader UI.

<br/>
</td></tr></table>

<br/>

![Persistence](https://img.shields.io/badge/%F0%9F%92%BE_PERSISTENCE-2d7d4f?style=for-the-badge&labelColor=0d1117)

<table><tr><td width="900">
<br/>

Companions persist across **sessions**, **zone transitions**, and **player deaths**. Their appearance, name, inventory, equipment, action mode, home position, and all state is stored in ZDO and survives server restarts. Follow targets are automatically restored after player respawn.

<br/>
</td></tr></table>

<br/>

---

<br/>

![Stats](https://img.shields.io/badge/%F0%9F%93%8A_COMPANION_STATS-2b4a3a?style=for-the-badge&labelColor=2b4a3a)

<table><tr><td width="900">
<br/>

| Stat | Value |
|:---|:---|
| ü™ô **Price** | 2,000 coins *(from bank)* |
| ‚ù§Ô∏è **Base Health** | 25 HP *(+ food bonus)* |
| ‚ö° **Base Stamina** | 25 *(+ food bonus)* |
| üéí **Carry Weight** | 300 |
| üö∂ **Walk Speed** | 2 m/s |
| üèÉ **Run Speed** | 7 m/s |
| ‚öñÔ∏è **Gather Stop Weight** | 298 *(stops harvesting)* |
| üìè **Home Leash Radius** | 50m *(Stay Home mode)* |

<br/>
</td></tr></table>

<br/>

---

<br/>

![Installation](https://img.shields.io/badge/%F0%9F%93%A6_INSTALLATION-4a3a2b?style=for-the-badge&labelColor=4a3a2b)

<table><tr><td width="900">
<br/>

**1.** Install [BepInEx](https://valheim.thunderstore.io/package/denikson/BepInExPack_Valheim/) for Valheim<br/>
**2.** Install [Trader Overhaul](https://github.com/JoeCorrell/TraderOverhaul) *(required dependency)*<br/>
**3.** Download the latest release from [Releases](https://github.com/JoeCorrell/OfflineCompanions/releases)<br/>
**4.** Extract to `BepInEx/plugins/OfflineCompanions/`<br/>
**5.** Launch the game

<br/>
</td></tr></table>

<br/>

> [!IMPORTANT]
> **Trader Overhaul** must be installed first ‚Äî the Companions tab is injected into its custom trader UI.

<br/>

---

<br/>

![Requirements](https://img.shields.io/badge/%F0%9F%93%8B_REQUIREMENTS-3a4a2b?style=for-the-badge&labelColor=3a4a2b)

<table><tr><td width="900">
<br/>

| Dependency | Version | Link |
|:---|:---|:---|
| Valheim | `0.219+` | ‚Äî |
| BepInEx | `5.4.2200+` | [Download](https://valheim.thunderstore.io/package/denikson/BepInExPack_Valheim/) |
| Trader Overhaul | `latest` | [GitHub](https://github.com/JoeCorrell/TraderOverhaul) |

<br/>
</td></tr></table>

<br/>

---

<br/>

![Compatibility](https://img.shields.io/badge/%F0%9F%94%97_COMPATIBILITY-4a2b3a?style=for-the-badge&labelColor=4a2b3a)

<table><tr><td width="900">
<br/>

- Requires **Trader Overhaul** ‚Äî the Companions tab is injected into its custom trader UI
- Companions use a custom `HC_Companion` prefab registered at startup
- Other NPC / follower mods should be compatible unless they patch `BaseAI` broadly
- **Multiplayer:** companions are owned by the spawning player via ZDO ownership

<br/>
</td></tr></table>

<br/>

---

<br/>

![Credits](https://img.shields.io/badge/%F0%9F%99%8F_CREDITS-2b2b4a?style=for-the-badge&labelColor=2b2b4a)

<table><tr><td width="900">
<br/>

<div align="center">

Built on [BepInEx](https://github.com/BepInEx/BepInEx) and [Harmony](https://github.com/pardeike/Harmony)
<br/>
Integrates with [Trader Overhaul](https://github.com/JoeCorrell/TraderOverhaul) for trader UI

</div>

<br/>
</td></tr></table>

<br/>

[![GitHub Issues](https://img.shields.io/badge/GitHub-Issues-181717?style=for-the-badge&logo=github&labelColor=0d1117)](https://github.com/JoeCorrell/OfflineCompanions/issues)
[![Discord](https://img.shields.io/badge/Discord-@profmags-5865F2?style=for-the-badge&logo=discord&logoColor=white&labelColor=0d1117)](https://discord.com)

<br/>

<sub>Forged with ‚ù§Ô∏è for the Valheim community ‚Äî sk√•l, Vikings.</sub>

</div>
